---
title: "The Performance"
description: "Complete the game with title screen, game over, victory, and the full game loop. Everything comes together."
pubDate: 2025-11-26
game: 1
gameName: "SID Symphony"
unit: 8
totalUnits: 16
system: "Commodore 64"
tags: ["assembly", "6510", "game-states", "state-machine", "complete-game"]
prevLesson: "/commodore-64/assembly/game-01-sid-symphony/unit-07"
nextLesson: "/commodore-64/assembly/game-01-sid-symphony/unit-09"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";

import InlineNote from "../../../../components/units/InlineNote.astro";

*Need to catch up? Check out [Unit 7: Song Data](/commodore-64/game-01-sid-symphony/unit-07).*

## What You're Building

You've built the pieces. Now they become a game.

By the end of this unit, you'll have:

- A title screen with instructions
- Game over when the crowd empties
- Victory when you complete the song
- Press SPACE to play again
- A complete game loop

## Game States

Every game is a state machine. SID Symphony has four states:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/01-game-states.asm" lang="asm" />

The game starts at the title screen. Press SPACE to play. Win or lose, press SPACE to return to the title. Simple, but it's a complete loop.

## The Main Loop as Dispatcher

Instead of one big main loop, we dispatch to different update routines based on state:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/02-the-main-loop-as-dispatcher.asm" lang="asm" />

Each state has its own update routine. The dispatcher just routes to the right one.

## The Title Screen

Simple text, no animation:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/03-the-title-screen.asm" lang="asm" />

The title state just waits for SPACE:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/04-the-title-screen.asm" lang="asm" />

## Checking the Space Key

SPACE is on column 7, row 4 of the keyboard matrix:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/05-checking-the-space-key.asm" lang="asm" />

<InlineNote>
We need to debounce the space key to prevent multiple triggers. We store the previous state and only act on the transition from not-pressed to pressed.
</InlineNote>

## State Transitions

**Title → Playing**: When SPACE is pressed, call `start_game` and change state.

**Playing → Game Over**: When the crowd meter hits zero:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/06-state-transitions.asm" lang="asm" />

**Playing → Victory**: When the song ends and no notes remain:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/07-state-transitions.asm" lang="asm" />

**Game Over/Victory → Title**: Both end screens wait for SPACE, then return to title.

## Start Game

When starting, reset everything and draw the game screen:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/08-start-game.asm" lang="asm" />

## End Screens

Game over and victory are similar — show a message, display the final score, wait for SPACE:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/09-end-screens.asm" lang="asm" />

The update for both end screens is the same — wait for SPACE:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/snippets/10-end-screens.asm" lang="asm" />

## Build It. Run It.

Assemble and run:

```bash
acme -o symphony.prg symphony.asm
x64sc symphony.prg
```

See the title screen. Press SPACE. Play the song. Win or lose, you'll see your score. Press SPACE to try again.

## What You've Learnt

- **State machines**: The pattern that organises all games
- **Dispatcher loops**: Routing to different code based on state
- **Screen management**: Drawing different screens for different states
- **Game reset**: Returning all variables to starting values
- **Polish**: The details that make a demo into a game

## The Core Game is Complete

Eight units. From an empty screen to a complete rhythm game. Units 9-16 are enhancements — they make the game better but aren't required to have a complete, playable game.

In [Unit 9: Sound Effects](/commodore-64/game-01-sid-symphony/unit-09), we add audio feedback beyond just the melody notes — miss sounds, crowd reactions, and more.

## The Complete Code

Here's the complete `symphony.asm` including all features from Units 1-8:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-08/symphony.asm" lang="asm" />

