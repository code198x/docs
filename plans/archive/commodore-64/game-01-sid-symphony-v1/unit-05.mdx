---
title: "The Crowd"
description: "Add stakes with a crowd meter. Hit notes to keep them happy. Miss too many and it's game over."
pubDate: 2025-11-25
game: 1
gameName: "SID Symphony"
unit: 5
totalUnits: 16
system: "Commodore 64"
tags: ["assembly", "6510", "game-state", "fail-state", "visual-feedback"]
prevLesson: "/commodore-64/assembly/game-01-sid-symphony/unit-04"
nextLesson: "/commodore-64/assembly/game-01-sid-symphony/unit-06"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";

import InlineNote from "../../../../components/units/InlineNote.astro";

*Need to catch up? Check out [Unit 4: Keeping Score](/commodore-64/game-01-sid-symphony/unit-04).*

## What You're Building

Score goes up. Streak goes up and down. But there's no consequence for missing. You can't lose. Where's the tension?

By the end of this unit, you'll have:

- A crowd meter that rises with hits and falls with misses
- Colour feedback showing your danger level (green/yellow/red)
- Game over when the crowd empties
- Real stakes — every note matters now

The toy becomes a game.

## The Crowd Meter

The crowd starts half-interested. Play well and they get excited. Play badly and they leave. When they're gone, it's over.

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-05/snippets/01-the-crowd-meter.asm" lang="asm" />

Why start at 10? It gives you room to grow *and* room to fail. Starting at max feels wrong — you can only go down. Starting at zero means instant danger. Half-full creates a balanced opening.

## Asymmetric Updates

Hits add 1. Misses subtract 2. This asymmetry is intentional:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-05/snippets/02-asymmetric-updates.asm" lang="asm" />

Why +1/-2? Several reasons:

- **Creates tension** — You can't coast on early success
- **Rewards consistency** — One lucky hit doesn't save you from two misses
- **Makes recovery feel earned** — Climbing back from danger takes effort
- **Standard rhythm game design** — Guitar Hero, Dance Dance Revolution all do this

<InlineNote>
Try changing the ratio. +1/-1 is too forgiving. +1/-3 might be brutal. The numbers are easy to tune — they're just constants.
</InlineNote>

## Colour Feedback

The meter changes colour to show danger level:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-05/snippets/03-colour-feedback.asm" lang="asm" />

Three zones:
- **Green (15-20)**: Crowd is loving it
- **Yellow (5-14)**: Doing okay, but careful
- **Red (0-4)**: Danger zone — one more miss could end you

The colour tells you your status at a glance. No need to count blocks.

## Drawing the Meter

The meter is 20 characters wide. Filled blocks for crowd level, spaces for empty:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-05/snippets/04-drawing-the-meter.asm" lang="asm" />

We use Y as a countdown. While Y > 0, draw solid blocks and decrement Y. When Y hits 0, draw spaces for the rest.

## Game Over

When the crowd empties, the game stops:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-05/snippets/05-game-over.asm" lang="asm" />

The main loop checks `game_running` before processing input or spawning notes. When it's zero, everything freezes:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-05/snippets/06-game-over.asm" lang="asm" />

In Unit 8, we'll add a proper state machine with restart capability. For now, game over means game over.

## Integration

In `check_hit`, after awarding points:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-05/snippets/07-integration.asm" lang="asm" />

In `update_notes`, when a note despawns:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-05/snippets/08-integration.asm" lang="asm" />

The `update_crowd_miss` call might trigger game over, so the main loop checks `game_running` before any game logic.

## Build It. Run It.

Assemble and run:

```bash
acme -o symphony.prg symphony.asm
x64sc symphony.prg
```

Watch the yellow meter. Hit notes — it grows toward green. Miss one — it drops. Miss a few more — red zone. Miss again — "GAME OVER".

## What You've Learnt

- **Bounded values**: Clamping to min/max ranges
- **State flags**: Using variables to control program flow
- **Colour as information**: Visual feedback without text
- **Tension design**: How asymmetry creates stakes

## Next Unit

One track. One key. One voice. But SID Symphony should have three of each — that's the "symphony" part.

In [Unit 6: Three Voices](/commodore-64/game-01-sid-symphony/unit-06), we activate all three tracks with all three SID voices. Three keys, three lanes, three sounds. The full rhythm game experience.

## The Complete Code

Here's the complete `symphony.asm` including all features from Units 1-5:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-05/symphony.asm" lang="asm" />

