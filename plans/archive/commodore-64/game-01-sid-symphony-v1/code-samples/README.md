# SID Symphony

A rhythm game for the Commodore 64 that teaches 6510 assembly programming through incremental game development.

## Overview

SID Symphony is a three-track rhythm game where players hit notes in time with music generated by the C64's SID chip. The game features timing grades, combo multipliers, difficulty progression, and high score tracking.

## Controls

- **X** - Hit notes on Track 1
- **C** - Hit notes on Track 2
- **V** - Hit notes on Track 3
- **P** - Pause/unpause (Unit 15+)
- **SPACE** - Start game / return to title

## Building

Requires [ACME Cross-Assembler](https://sourceforge.net/projects/acme-crossass/).

```bash
acme -f cbm -o symphony.prg symphony.asm
```

Or use the provided Docker container:

```bash
docker run --rm -v "$(pwd):/workspace" -w /workspace \
  ghcr.io/code198x/commodore-64:latest \
  acme -f cbm -o symphony.prg symphony.asm
```

## Unit Progression

| Unit | Title | Features Introduced |
|------|-------|---------------------|
| 01 | The Stage | Basic screen setup, single key input, SID gate control |
| 02 | The Notes | Note spawning and movement system (4 notes max) |
| 03 | Hit Detection | Hit/miss detection logic, visual feedback flashing |
| 04 | Scoring | 16-bit score tracking, streak counting, display rendering |
| 05 | The Crowd | Crowd meter system, game-over condition |
| 06 | Three Tracks | Multi-voice SID (3 tracks), X/C/V input, track-specific detection |
| 07 | Song Data | Data-driven note spawning, song format |
| 08 | Game States | State machine (title/game/gameover/victory), UI screens |
| 09 | Sound Design | Distinct waveforms per track, filter sweep, miss sound |
| 10 | Timing Grades | Perfect/Good/Late grades with different point values |
| 11 | Combo System | Combo multiplier (1x-4x), consecutive hit tracking |
| 12 | Visual Juice | Border flash effects on multiplier increase and miss |
| 13 | Difficulty | Dynamic speed based on multiplier level |
| 14 | High Scores | 16-bit high score comparison and persistence |
| 15 | Pause | Pause functionality with audio silencing |
| 16 | Polish | Final version with refined comments and documentation |

## Learning Objectives

### Phase 1: Foundation (Units 1-5)
- VIC-II screen setup and colour memory
- CIA keyboard scanning
- SID basic gate control
- Game loop timing with raster sync
- 16-bit arithmetic for scoring

### Phase 2: Multi-Track (Units 6-9)
- Multi-voice SID programming
- Complex keyboard matrix scanning
- Data-driven design patterns
- State machine architecture

### Phase 3: Refinement (Units 10-12)
- Timing windows and grade calculation
- Score multiplication without MUL instruction
- Visual feedback systems

### Phase 4: Meta-Game (Units 13-16)
- Difficulty progression
- High score persistence
- Pause system implementation
- Code organisation and polish

## Hardware Used

- **VIC-II**: Screen display, colour RAM, raster timing
- **SID**: Three voice synthesis, filter control, ADSR envelopes
- **CIA1**: Keyboard matrix scanning

## File Structure

Each unit contains:
- `symphony.asm` - Main assembly source
- `symphony.prg` - Compiled C64 executable
- `snippets/` - Code excerpts for documentation (where applicable)
