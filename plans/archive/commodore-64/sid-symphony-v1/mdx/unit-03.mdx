---
title: "ADSR Envelopes"
description: "Shape sounds from harsh stabs to soft pads. The same note becomes organ, string, or pluck through envelope design."
pubDate: 2026-01-08
game: 1
gameName: "SID Symphony"
unit: 3
totalUnits: 64
system: "Commodore 64"
tags: ["assembly", "6510", "sid", "adsr", "envelope", "sound-design"]
prevLesson: "/commodore-64/assembly/game-01-sid-symphony/unit-02"
nextLesson: "/commodore-64/assembly/game-01-sid-symphony/unit-04"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";
import InlineNote from "../../../../components/units/InlineNote.astro";

*Need to catch up? Check out [Unit 2: The Three Voices](/commodore-64/assembly/game-01-sid-symphony/unit-02).*

## What You're Building

We briefly mentioned ADSR in Unit 1. Now we master it.

The same frequency. The same waveform. But radically different sounds — organ, string, and pluck — all from the same note, shaped only by their envelopes.

By the end of this unit, you'll have:

- Deep understanding of Attack, Decay, Sustain, and Release
- Three voices playing the same note with completely different characters
- The ability to design sounds, not just trigger them

This is where programming becomes *sound design*.

## The Shape of Sound

A piano key struck and held doesn't produce a constant volume. It starts with a sharp attack, settles into a sustained tone, and fades when released. A flute note swells in gradually. A drum hit is all attack, no sustain.

ADSR captures this evolution:

- **Attack**: Time from silence to peak volume
- **Decay**: Time from peak to sustain level
- **Sustain**: Volume level while note is held (not a time — a level)
- **Release**: Time from sustain to silence after note ends

The SID lets you set each parameter from 0-15, packed into two registers:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-03/snippets/01-adsr-registers.asm" />

## Attack Times

Attack values map to specific times. The scale is non-linear — small values for fast attacks, large values for slow swells:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-03/snippets/02-attack-times.asm" />

Decay and Release use the same time values. The non-linear scale gives fine control over fast times (where precision matters for percussive sounds) and coarse control over slow times (where exact duration matters less).

<InlineNote>
Sustain is different — it's a *level* (0-15), not a time. Sustain=8 means the sound holds at half volume. Sustain=0 means the sound fades to silence during decay, regardless of whether the gate stays open.
</InlineNote>

## Three Characters, One Note

Let's create three distinct sounds, all playing the same C4 note:

### The Organ

Instant attack, full sustain, slow release. The classic held-key sound:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-03/snippets/03-organ-envelope.asm" />

### The String

Slow swell, partial sustain, gradual fade. Like a bowed instrument:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-03/snippets/04-string-envelope.asm" />

### The Pluck

Instant hit, quick decay to nothing. Like a plucked guitar string:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-03/snippets/05-pluck-envelope.asm" />

## The Gate Cycle

The gate bit controls when the ADSR cycle runs:

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-03/snippets/06-gate-cycle.asm" />

When you open the gate, Attack begins immediately. The sound rises to full volume, then falls to the Sustain level during Decay. It holds at Sustain until you close the gate, which triggers Release — the final fade to silence.

For the pluck envelope (Sustain=0), the sound fades to nothing during Decay even if the gate stays open. The Release phase has nothing left to fade.

## Hearing the Difference

This unit's program plays each voice separately so you can clearly hear each envelope character, then plays all three together as a chord:

1. **Organ** (C): Appears instantly, sustains fully, fades slowly when released
2. **String** (E): Swells in over ~1 second, sustains, fades gradually
3. **Pluck** (G): Hits instantly, fades away almost immediately
4. **All three**: The chord combines all three characters

Run it. Close your eyes. Listen to how the same waveform becomes three different instruments through envelope shaping alone.

## Build It. Run It.

```bash
acme -f cbm -o symphony.prg symphony.asm
x64sc symphony.prg
```

The program loops: trigger, hold, release, wait, repeat. Each cycle lets you hear the full ADSR journey.

Experiments to try:
1. Set Voice 3's decay to 15 — watch the pluck become a slow fade
2. Set Voice 2's attack to 15 — hear an 8-second swell
3. Set Voice 1's release to 0 — instant silence when gate closes

## What You've Learnt

- **ADSR register layout**: Attack/Decay in one byte, Sustain/Release in another
- **Time values**: 0-15 maps to 2ms-8 seconds (non-linear)
- **Sustain is a level**: Not a time; determines volume during held notes
- **Gate triggers cycles**: Open = Attack starts, Close = Release starts

## The Complete Code

<CodeFromFile src="commodore-64/game-01-sid-symphony/unit-03/symphony.asm" />

## Next Unit

We can make sounds. We can shape them. But we're stuck on one note — middle C.

In Unit 4, we build a frequency table covering a full octave, then play an ascending scale. The SID learns to sing melodies.
