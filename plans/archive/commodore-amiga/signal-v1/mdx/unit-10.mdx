---
title: "Home Zone"
description: "Add the goal at the top of the screen where the frog must reach to score."
pubDate: 2026-01-04
game: 1
gameName: "Hop"
unit: 10
totalUnits: 16
system: "Commodore Amiga"
tags: ["assembly", "68000", "game-logic", "win-condition"]
nextLesson: "/commodore-amiga/assembly/game-01-signal/unit-11"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";

*Need to catch up? Check out [Unit 9: Lives and Scoring](/commodore-amiga/game-01-signal/unit-09).*

## What You're Building

Our frog can cross the road and navigate the river, but there's no destination. In the classic game, you need to guide frogs into home slots at the top of the screen. Fill all the slots to complete the level.

This unit adds:
- **Home slots** at the top of the screen
- **Goal detection** when the frog reaches a slot
- **Slot filling** to track which homes are occupied
- **Level completion** when all slots are filled
- **Bonus points** for reaching home

## The Home Zone Layout

The home zone sits at the very top of the screen, above the water. It consists of several slots (typically 5) where the frog can land:

```
+---+   +---+   +---+   +---+   +---+
| 1 |   | 2 |   | 3 |   | 4 |   | 5 |   <- Home slots
+---+   +---+   +---+   +---+   +---+
    XXXXXXX   XXXXXXX   XXXXXXX         <- Deadly gaps between
```

Landing in a slot fills it and awards bonus points. Landing in a gap (between slots) kills the frog. Landing in an already-filled slot also kills the frog.

## Home Slot Data Structure

We need to track each slot's position and whether it's filled:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/01-home-slot-data-structure.asm" lang="asm" />

Each slot is 32 pixels wide with gaps between them. The Y position is constant for all slots.

## Zone Constants

Add the home zone to our boundaries:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/02-zone-constants.asm" lang="asm" />

## Detecting Home Zone Entry

When the frog's Y position enters the home zone, we check if it's in a valid slot:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/03-detecting-home-zone-entry.asm" lang="asm" />

## Finding the Home Slot

Given the frog's X position, determine which slot (if any) it's in:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/04-finding-the-home-slot.asm" lang="asm" />

## Filling a Home Slot

When the frog reaches an empty slot, fill it and award points:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/05-filling-a-home-slot.asm" lang="asm" />

## Checking Level Completion

When all 5 slots are filled, the level is complete:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/06-checking-level-completion.asm" lang="asm" />

## Drawing the Home Zone

We need to draw the home slots visually. Empty slots appear as dark rectangles, filled slots show a small frog icon:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/07-drawing-the-home-zone.asm" lang="asm" />

For simplicity, we'll use the Blitter to draw rectangles:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/08-drawing-the-home-zone.asm" lang="asm" />

## Updated Main Loop

Add home zone checking to the main loop:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/09-updated-main-loop.asm" lang="asm" />

The order matters: check home zone BEFORE platform (the home zone is above water, so we don't want water death to trigger first).

## Initialisation

Add home slot initialisation to startup:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/snippets/10-initialisation.asm" lang="asm" />

## Build It. Run It.

Save the complete code below as `hop.asm` and build:

```bash
vasmm68k_mot -Fhunkexe -kick1hunks -nosym -o hop hop.asm
```

Create a bootable ADF:

```bash
xdftool hop.adf format "Hop" + write hop + makedir s + write s/startup-sequence "hop"
```

Run in an emulator:

```bash
fs-uae --floppy_drive_0=hop.adf
```

**Expected behaviour:**
- Five home slots visible at the top
- Hopping into an empty slot fills it and awards 100 points
- Hopping into a gap between slots kills the frog
- Hopping into an already-filled slot kills the frog
- Filling all 5 slots awards 1000 bonus points and resets the level
- Frog resets to start after filling each slot

## What You've Learnt

| Concept | Why It Matters |
|---------|----------------|
| Goal zones | Every game needs a win condition |
| Slot detection | Precise position checking |
| State tracking | Array of filled/empty flags |
| Level completion | Multi-condition victory check |
| Level reset | Restoring initial game state |

## The Complete Code

Here's the full `hop.asm` with home zones:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-10/hop.asm" lang="asm" />

## Recap / Sanity Check

Before moving on, verify:
- [ ] Five home slots visible at top of screen
- [ ] Reaching an empty slot fills it and awards 100 points
- [ ] Frog resets to start after reaching home
- [ ] Jumping into a gap kills the frog
- [ ] Jumping into a filled slot kills the frog
- [ ] Filling all 5 slots awards 1000 points and resets level
- [ ] Code assembles without errors

## Next Unit

[Unit 11: Sound Effects](/commodore-amiga/game-01-signal/unit-11) - Add audio feedback using the Paula chip.
