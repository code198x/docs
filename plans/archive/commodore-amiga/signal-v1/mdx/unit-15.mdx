---
title: "Time Limit"
description: "Add a countdown timer for extra pressure and time bonus scoring."
pubDate: 2026-01-04
game: 1
gameName: "Hop"
unit: 15
totalUnits: 16
system: "Commodore Amiga"
tags: ["assembly", "68000", "timer", "urgency"]
nextLesson: "/commodore-amiga/assembly/game-01-signal/unit-16"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";

import InlineNote from "../../../../components/units/InlineNote.astro";

*Need to catch up? Check out [Unit 14: Level Progression](/commodore-amiga/game-01-signal/unit-14).*

## What You're Building

Classic Frogger has a time limit. If you don't reach a home slot before time runs out, you lose a life. This adds urgency and prevents players from waiting indefinitely for "safe" moments. This unit adds:

- A countdown timer that resets when reaching home
- Timer displayed as a diminishing bar in the HUD
- Death when timer reaches zero
- Time bonus added to score for quick completions

When you're done, reaching home quickly rewards you with bonus points, while dawdling too long costs a life.

## Timer Design

We'll implement a simple countdown that decrements each frame. At 50fps (PAL), counting down from 1500 gives 30 seconds per life:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-15/snippets/01-timer-design.asm" lang="asm" />

The timer bar width is calculated proportionally:

```
bar_width = (timer_value * MAX_BAR_WIDTH) / TIMER_START
```

## Updating the Timer

Each frame during active gameplay, we decrement the timer:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-15/snippets/02-updating-the-timer.asm" lang="asm" />

## Drawing the Timer Bar

We draw a horizontal bar that shrinks as time runs out. When low, it changes colour:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-15/snippets/03-drawing-the-timer-bar.asm" lang="asm" />

<InlineNote>
Drawing a variable-width bar requires handling partial bytes at the right edge. A bar 25 pixels wide needs 3 full bytes (24 pixels) plus a partial byte with only the leftmost bit set.
</InlineNote>

## Time Bonus

When reaching a home slot, award bonus points based on remaining time:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-15/snippets/04-time-bonus.asm" lang="asm" />

With a 30-second timer, this gives up to ~93 bonus points for instant completion, scaling down to 0 if you barely make it.

## Resetting the Timer

The timer resets in several situations:

1. Starting a new game
2. After reaching a home slot
3. After losing a life and respawning

<CodeFromFile src="commodore-amiga/game-01-signal/unit-15/snippets/05-resetting-the-timer.asm" lang="asm" />

## Shorter Time on Higher Levels

To increase difficulty, we reduce the starting time as levels progress:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-15/snippets/06-shorter-time-on-higher-levels.asm" lang="asm" />

## Build It. Run It.

Assemble and run:

```bash
vasmm68k_mot -Fhunkexe -o hop -nosym hop.asm
```

Test the timer:

1. Timer bar should appear below the score
2. Bar should shrink as time passes
3. Flashing should start when time is low
4. Running out of time should kill the frog
5. Reaching home should reset the timer and award bonus points
6. Higher levels should start with less time

## What You've Learnt

- **Frame counting**: Using vertical blank frequency for timing
- **Proportional drawing**: Scaling values for variable-width display
- **Bit manipulation**: Creating masks for partial byte drawing
- **Warning feedback**: Visual cues for urgent game states
- **Bonus systems**: Rewarding skilful play with extra points

## The Complete Code

Here's the complete `hop.asm` with time limit:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-15/hop.asm" lang="asm" />

## Recap / Sanity Check

Before moving on, verify:

- [ ] Timer bar displays and shrinks during gameplay
- [ ] Timer flashes when low (under 10 seconds)
- [ ] Running out of time causes death
- [ ] Reaching home resets timer and awards bonus
- [ ] Higher levels have shorter time limits
- [ ] Timer pauses during death animation

## Next Unit

[Unit 16: Polish and System Restore](/commodore-amiga/game-01-signal/unit-16) - Final touches and returning control to AmigaOS.
