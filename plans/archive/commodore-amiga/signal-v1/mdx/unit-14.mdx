---
title: "Level Progression"
description: "Make the game harder as levels increase with faster objects and more hazards."
pubDate: 2026-01-04
game: 1
gameName: "Hop"
unit: 14
totalUnits: 16
system: "Commodore Amiga"
tags: ["assembly", "68000", "difficulty", "progression"]
nextLesson: "/commodore-amiga/assembly/game-01-signal/unit-15"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";

import InlineNote from "../../../../components/units/InlineNote.astro";

*Need to catch up? Check out [Unit 13: High Score Table](/commodore-amiga/game-01-signal/unit-13).*

## What You're Building

Right now, the game plays the same whether you're on level 1 or level 10. That's not very challenging! This unit adds:

- Increasing object speeds as levels progress
- Additional objects spawning on higher levels
- Speed caps to prevent unplayable difficulty
- Level display in the HUD

When you're done, completing each level makes the next one noticeably harder. Cars move faster, logs become trickier to ride, and the game demands quicker reflexes.

## Difficulty Scaling Approach

There are many ways to scale difficulty. We'll use the simplest: multiply base speeds by a factor that increases each level.

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/snippets/01-difficulty-scaling-approach.asm" lang="asm" />

The formula is: `actual_speed = base_speed * (16 + (level-1) * SPEED_INCREASE) / 16`

This uses fixed-point arithmetic. We represent 1.0 as 16, so we can do fractional scaling with integer maths.

## Calculating Level Speed

Here's a routine that returns the speed multiplier for the current level:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/snippets/02-calculating-level-speed.asm" lang="asm" />

Level 1 returns 16 (1.0x), level 2 returns 18 (1.125x), level 5 returns 24 (1.5x), and it caps at 32 (2.0x).

## Applying Speed to Objects

When updating objects, we scale their movement by the level multiplier:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/snippets/03-applying-speed-to-objects.asm" lang="asm" />

<InlineNote>
We store base speeds in the object array and scale them each frame rather than modifying the stored values. This means we can easily reset to level 1 speeds without reinitialising all objects.
</InlineNote>

## Adding More Objects on Higher Levels

Starting from level 3, we spawn additional objects. We do this by activating previously dormant object slots:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/snippets/04-adding-more-objects-on-higher-levels.asm" lang="asm" />

When initialising objects, we set up all 12 but only the first 8 start with valid types. Additional objects are initialised with TYPE_NONE and activated as the player progresses:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/snippets/05-adding-more-objects-on-higher-levels.asm" lang="asm" />

## Simple Random Number Generator

For spawning objects at random positions, we need a random number generator. A linear congruential generator works well:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/snippets/06-simple-random-number-generator.asm" lang="asm" />

The constants `$41C6` (16838) and `$3039` (12345) are standard LCG parameters that produce a reasonable distribution.

## Displaying the Level

We add the level to the HUD so players know their progress:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/snippets/07-displaying-the-level.asm" lang="asm" />

We'll add a 2-digit number drawing routine for cleaner display:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/snippets/08-displaying-the-level.asm" lang="asm" />

## Level Transition

When a level is completed (all homes filled), we already increment the level counter. Now we also activate new objects:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/snippets/09-level-transition.asm" lang="asm" />

## Build It. Run It.

Assemble and run:

```bash
vasmm68k_mot -Fhunkexe -o hop -nosym hop.asm
```

Test the progression:

1. Level 1 should feel manageable
2. Complete all 5 homes to advance
3. Level 2 objects should move noticeably faster
4. By level 5, the game should be quite challenging
5. Speeds cap at 2x to remain playable

## What You've Learnt

- **Fixed-point arithmetic**: Using integers to represent fractions (16 = 1.0)
- **Difficulty curves**: Scaling values smoothly across levels
- **Speed caps**: Preventing unplayable difficulty
- **Object spawning**: Dynamically activating dormant objects
- **Random numbers**: Linear congruential generator basics

## The Complete Code

Here's the complete `hop.asm` with level progression:

<CodeFromFile src="commodore-amiga/game-01-signal/unit-14/hop.asm" lang="asm" />

## Recap / Sanity Check

Before moving on, verify:

- [ ] Level displays in HUD alongside score and lives
- [ ] Level 1 objects move at normal speed
- [ ] Completing all homes advances to next level
- [ ] Level 2+ objects move noticeably faster
- [ ] Speed increase caps at 2x (around level 9)
- [ ] Game remains playable at maximum difficulty

## Next Unit

[Unit 15: Time Limit](/commodore-amiga/game-01-signal/unit-15) - Add a countdown timer for extra pressure and bonus scoring.
