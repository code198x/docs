---
title: "Visual Polish"
description: "Improve readability: better cursor, pacing, colours, and messaging."
pubDate: 2026-01-04
game: 1
gameName: "Ink War"
unit: 15
totalUnits: 16
system: "Sinclair ZX Spectrum"
tags: ["assembly", "z80", "ui", "polish"]
nextLesson: "/sinclair-zx-spectrum/assembly/game-01-ink-war/unit-16"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";

*Need to catch up? Check out [Unit 14: Difficulty Levels](/sinclair-zx-spectrum/game-01-ink-war/unit-14).*

## What You're Building

The game works, but it's a bit rough around the edges. The hardware FLASH cursor blinks at a fixed rate that feels abrupt. Cells just change colour instantly with no feedback. Time for some visual polish.

By the end of this unit, you'll have:

- A software-controlled cursor blink (smoother than hardware FLASH)
- A capture flash effect when claiming cells
- Refined colour choices throughout
- A more polished overall experience

![Polished game with smooth cursor](/images/sinclair-zx-spectrum/game-01-ink-war/unit-15/screenshot.png)

## The Plan

We need to:

1. **Replace hardware FLASH** — Use software blink via BRIGHT attribute
2. **Add capture flash** — Brief bright flash when claiming cells
3. **Refine colours** — Cleaner palette for better visibility
4. **Polish pacing** — Small timing tweaks

## Understanding FLASH vs BRIGHT

The ZX Spectrum's attribute byte has two useful bits for visual effects:

| Bit | Name   | Effect |
|-----|--------|--------|
| 7   | FLASH  | Hardware toggles ink/paper every 32 frames |
| 6   | BRIGHT | Makes colours more vivid |

Hardware FLASH is convenient but has downsides:
- Fixed 32-frame toggle rate (too slow/too fast depending on the effect)
- Harsh visual transition
- Can't control the timing

Software blink using BRIGHT gives us:
- Complete control over toggle rate
- Smoother appearance
- Can adjust timing for different effects

## The Cursor Blink System

Add a variable to track cursor state:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/01-the-cursor-blink-system.asm" lang="asm" />

Define the blink rate:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/02-the-cursor-blink-system.asm" lang="asm" />

Update the cursor every frame in the main loop:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/03-the-cursor-blink-system.asm" lang="asm" />

The blink routine:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/04-the-cursor-blink-system.asm" lang="asm" />

**`xor 1`** — XOR with 1 flips the bottom bit. 0 XOR 1 = 1. 1 XOR 1 = 0. Perfect for toggling.

## Drawing the Cursor State

Instead of setting/clearing FLASH, we toggle BRIGHT:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/05-drawing-the-cursor-state.asm" lang="asm" />

## Updating Movement

When moving the cursor, we need to:
1. Clear BRIGHT on the old position
2. Reset the timer
3. Show the cursor (BRIGHT) on the new position

Update the clear_cursor routine:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/06-updating-movement.asm" lang="asm" />

Update highlight_cursor to set BRIGHT and reset the timer:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/07-updating-movement.asm" lang="asm" />

## The Capture Flash Effect

When claiming a cell, briefly show it brighter before settling to the final colour. This gives satisfying feedback.

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/08-the-capture-flash-effect.asm" lang="asm" />

Call this after setting the cell colour:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/09-the-capture-flash-effect.asm" lang="asm" />

## Refined Colours

Let's improve the colour palette. The current colours work but we can make them cleaner:

**Neutral cells** — Keep white for clear visibility

**Player 1** — Red works well but let's use a purer red:
<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/10-refined-colours.asm" lang="asm" />

**Player 2/CPU** — Cyan is good but let's define it clearly:
<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/11-refined-colours.asm" lang="asm" />

**BRIGHT versions** — For the capture flash, the BRIGHT bit makes:
- Red → Bright Red (more vivid)
- Cyan → Bright Cyan (more vivid)
- White → Bright White (maximum brightness)

The colours are already well-chosen, so we'll keep them.

## Turn Indicator Text

Add text showing whose turn it is. First, the strings:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/12-turn-indicator-text.asm" lang="asm" />

Display the turn indicator at the top of the screen:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/13-turn-indicator-text.asm" lang="asm" />

Call this from `update_ui_colours`:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/14-turn-indicator-text.asm" lang="asm" />

Actually, let's keep it simpler and just rely on the border colour. The turn indicator adds clutter and requires careful positioning. The border already clearly shows whose turn it is.

## Initialising the Cursor

Update `init_game` to set up the cursor blink:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/15-initialising-the-cursor.asm" lang="asm" />

## AI Capture Flash

The AI should also get the capture flash for consistency:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/snippets/16-ai-capture-flash.asm" lang="asm" />

## Build It. Run It.

```bash
pasmo --tapbas inkwar.asm inkwar.tap
```

Test the polish:

- **Cursor blink** — Smooth toggle every 12 frames (about 4 times per second)
- **Capture flash** — Brief bright flash when you claim a cell
- **AI capture flash** — Same effect when the AI claims
- **No more hardware FLASH** — Cleaner, more controlled visuals

## Recap / Sanity Check

- Hardware FLASH replaced with software BRIGHT toggle
- Cursor blinks at controllable rate (12 frames)
- Capture flash provides satisfying feedback
- Both player and AI get the flash effect
- All existing gameplay unchanged

## What You've Built

Comparing to Unit 14:

- **`cursor_timer`** — Frames until next toggle
- **`cursor_visible`** — Current cursor state
- **`CURSOR_BLINK`** — Toggle rate constant
- **`update_cursor_blink`** — Frame-based toggle logic
- **`draw_cursor_state`** — Apply BRIGHT based on state
- **`capture_flash`** — Visual feedback for claims
- **Updated `highlight_cursor`/`clear_cursor`** — Use BRIGHT not FLASH

The game now feels much more polished!

## What You've Learnt

- **Software vs hardware effects** — More control with software timing
- **BRIGHT attribute** — Bit 6 for vivid colours
- **Visual feedback** — Small effects improve game feel
- **XOR toggle** — `xor 1` to flip between 0 and 1

## The Complete Code

Here's `inkwar.asm` as it stands after Unit 15:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-15/inkwar.asm" lang="asm" />

## Next Unit

The game looks and feels polished now. There's just one thing left.

In Unit 16, we'll wrap everything up with **Final Game** — the complete, finished product.
