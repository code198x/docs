---
title: "Final Game"
description: "Wrap up Ink War with restart flow, final checks, and a release build."
pubDate: 2026-01-04
game: 1
gameName: "Ink War"
unit: 16
totalUnits: 16
system: "Sinclair ZX Spectrum"
tags: ["assembly", "z80", "release", "polish"]
nextLesson: "/sinclair-zx-spectrum"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";

*Need to catch up? Check out [Unit 15: Visual Polish](/sinclair-zx-spectrum/game-01-ink-war/unit-15).*

## What You're Building

You've built a complete game. This final unit is about wrapping it up — adding finishing touches, verifying the game flow, and creating the release build.

By the end of this unit, you'll have:

- A version string on the title screen
- Clean restart flow preserving preferences
- Final code comments and organisation
- A release-ready TAP file

![The finished game](/images/sinclair-zx-spectrum/game-01-ink-war/unit-16/screenshot.png)

## The Complete Journey

Let's recap what you've built across 16 units:

| Unit | Feature |
|------|---------|
| 1 | Project setup and first output |
| 2 | Attribute-based graphics |
| 3 | Drawing the game board |
| 4 | Cursor movement |
| 5 | Keyboard input (QAOP) |
| 6 | Game state and cell ownership |
| 7 | Claiming cells with adjacency rules |
| 8 | AI opponent |
| 9 | Win condition detection |
| 10 | Score display |
| 11 | Sound effects |
| 12 | Title screen |
| 13 | Two-player mode |
| 14 | Difficulty levels |
| 15 | Visual polish |
| 16 | Final release |

That's a complete game built from scratch in Z80 assembly!

## Adding a Version String

Add a version string to show on the title screen:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-16/snippets/01-adding-a-version-string.asm" lang="asm" />

Display it at the bottom of the title screen:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-16/snippets/02-adding-a-version-string.asm" lang="asm" />

The version string helps players identify which build they have, and gives you something to increment for future updates.

## Verifying the Game Flow

The complete game flow should be:

```
START
  ↓
Title Screen (press 1 or 2)
  ↓
[If 1P] Difficulty Selection (press 1, 2, or 3)
  ↓
Game Initialisation
  ↓
Main Game Loop
  ↓
[On moves exhausted] Game Over Detection
  ↓
Results Screen (SPACE to continue)
  ↓
Back to Title Screen
```

Test each path:

**1P Easy:**
1. Press 1 on title
2. Press 1 for Easy
3. Play game (AI is slow, doesn't block well)
4. Game ends, results shown
5. Press SPACE → returns to title

**1P Hard:**
1. Press 1 on title
2. Press 3 for Hard
3. Play game (AI is fast and strategic)
4. Game ends, results shown
5. Press SPACE → returns to title

**2P Mode:**
1. Press 2 on title
2. Game starts immediately (no difficulty)
3. Players alternate (border colour shows turn)
4. Game ends, results shown
5. Press SPACE → returns to title

## Preserving Preferences

When returning to the title, the mode and difficulty variables are preserved in RAM. This means:

- If you played 1P Normal last, pressing 1 takes you to difficulty selection again
- The previous difficulty value is still there, but you choose fresh

This is the expected behaviour — each game should let you choose your settings.

## Final Code Organisation

Let's add header comments to the final code:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-16/snippets/03-final-code-organisation.asm" lang="asm" />

## The Final Features List

**Gameplay:**
- 8×8 board territory control
- Adjacency-based expansion
- 62 moves total (64 cells minus 2 starting cells)
- Territory counting to determine winner

**Game Modes:**
- 1 Player vs AI
- 2 Player hotseat

**AI System:**
- Three difficulty levels
- Neighbour-based scoring
- Centre preference (Normal/Hard)
- Blocking bonus (Normal/Hard)
- Variable think delay

**Audio:**
- Movement click
- Claim sound
- Victory jingle
- Defeat sound
- Draw tones

**Visuals:**
- Software cursor blink
- Capture flash effect
- Border colour turn indicator
- Clean text-based UI

## Build the Final TAP

```bash
pasmo --tapbas inkwar.asm inkwar.tap
```

This creates a TAP file that:
- Auto-runs when loaded
- Contains the complete game
- Works on real hardware or emulators

## Final Testing Checklist

Before sharing your game, verify:

- [ ] Title screen displays correctly
- [ ] Version number visible
- [ ] Mode selection works (1 and 2 keys)
- [ ] Difficulty selection works (1, 2, 3 keys)
- [ ] Cursor moves with QAOP
- [ ] Can only claim adjacent cells
- [ ] Border shows current player
- [ ] AI makes legal moves
- [ ] AI difficulty affects behaviour
- [ ] Sound effects play correctly
- [ ] Game ends when board fills
- [ ] Scores calculated correctly
- [ ] Winner declared correctly
- [ ] Victory/defeat/draw sounds play
- [ ] SPACE returns to title
- [ ] No crashes or freezes

## Sharing Your Game

You can share the TAP file with anyone who has:
- A ZX Spectrum
- A Spectrum emulator (Fuse, ZXSpin, etc.)
- A device that can load TAPs to real hardware

Consider uploading to:
- World of Spectrum
- itch.io
- Your personal website

## What You've Accomplished

Over 16 units, you've:

1. **Learnt Z80 assembly** — Registers, instructions, memory access
2. **Understood Spectrum hardware** — Attributes, keyboard matrix, beeper
3. **Built a complete game loop** — Title, gameplay, results, restart
4. **Implemented AI** — Scoring heuristics, difficulty tuning
5. **Added polish** — Sound, visual feedback, user interface

You've written approximately 2500 lines of assembly code that compiles to about 3KB of machine code — a complete, playable game that runs on hardware from 1982.

## What You've Learnt

Throughout this project:

- **Memory layout** — Screen memory, attributes, RAM
- **Attribute graphics** — Using colour blocks for gameplay
- **Keyboard scanning** — Reading half-rows via port $FE
- **Sound generation** — 1-bit audio via the beeper
- **Game state** — Tracking board, players, scores
- **AI programming** — Heuristic scoring and move selection
- **Program flow** — Multiple screens, modes, and states
- **Software effects** — Custom blink rates, flash effects

## The Complete Code

Here's the final `inkwar.asm`:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-16/inkwar.asm" lang="asm" />

## Congratulations!

You've built a complete game for the ZX Spectrum from scratch. **Ink War** is a fully-featured territory control game with:

- Single-player with three AI difficulty levels
- Two-player hotseat multiplayer
- Sound effects throughout
- Polished visual feedback
- Clean game flow

This is the foundation for understanding retro game development. The skills you've learnt — managing memory, reading hardware, implementing game logic in assembly — transfer to other 8-bit systems and beyond.

## What's Next?

Now that you've completed your first ZX Spectrum game, you could:

- **Enhance Ink War** — Add new features, larger boards, different AI strategies
- **Start a new game** — Apply these skills to a different game concept
- **Explore other platforms** — Try Commodore 64, Amiga, or NES development

Whatever you choose, you now have the skills to code like it's 198x.

[Return to ZX Spectrum home](/sinclair-zx-spectrum) to continue your retro development journey.
