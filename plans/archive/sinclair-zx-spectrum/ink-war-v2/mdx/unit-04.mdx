---
title: "Player Colours"
description: "Define the colours of war. Bright red versus bright blue. Create routines to claim territory."
pubDate: 2026-01-09
game: 1
gameName: "Ink War"
unit: 4
totalUnits: 64
system: "Sinclair ZX Spectrum"
tags: ["assembly", "z80", "game-state", "subroutines", "colours"]
prevLesson: "/sinclair-zx-spectrum/assembly/game-01-ink-war/unit-03"
nextLesson: "/sinclair-zx-spectrum/assembly/game-01-ink-war/unit-05"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";
import InlineNote from "../../../../components/units/InlineNote.astro";

## What You're Building

We have a board. Now we need to show what happens when players battle over it.

By the end of this unit, you'll have:

- Player colour constants (bright red vs bright blue)
- A `set_cell` subroutine to claim any cell
- A visual preview of what gameplay will look like
- The foundation for game state management

![Unit 4 Screenshot](/images/sinclair-zx-spectrum/game-01-ink-war/unit-04/screenshot.png)

## Defining Player Colours

Each cell can be in one of three states: empty, claimed by Player 1, or claimed by Player 2. We need constants for both the state values and their visual appearance:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-04/snippets/01-player-constants.asm" />

We use **bright** red and blue (bit 6 set) because they pop against the white board. Normal red and blue would work, but bright colours make the territories visually distinct.

<InlineNote>
Why red vs blue? They're traditional rivals — think chess pieces, sports teams, political maps. They're also on opposite sides of the colour spectrum, making them easy to distinguish even at a glance.
</InlineNote>

## The set_cell Subroutine

Rather than calculating addresses every time we want to colour a cell, we create a reusable subroutine. Give it a row, column, and player, and it handles the rest:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-04/snippets/02-set-cell.asm" />

The key insight: board coordinates (0-7) aren't the same as screen coordinates. We add `BOARD_TOP` and `BOARD_LEFT` to convert from board space to screen space.

## Converting State to Colour

The `get_player_colour` subroutine translates a player number into the corresponding attribute byte:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-04/snippets/03-get-colour.asm" />

This separation is important. The game logic works with player numbers (0, 1, 2). The display code works with attribute bytes. Keeping them separate makes the code cleaner and easier to modify.

## Claiming Territory

To claim a cell, we load the row into B, column into C, player into A, and call `set_cell`:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-04/snippets/04-claim-example.asm" />

In the screenshot, you can see the result: Player 1 (red) has claimed the top-left corner, while Player 2 (blue) controls the bottom-right. The white cells in between are unclaimed territory — the battlefield.

## Looking Ahead: Game State

Right now, we're only changing colours on screen. The display *looks* like a game, but there's no actual game state — no memory of which cells belong to whom.

In later units, we'll add a 64-byte array tracking ownership. But for now, the visual feedback is enough to understand the goal: claim more cells than your opponent.

## Build It. Run It.

```bash
pasmonext --sna inkwar.asm inkwar.sna
```

You should see:

- The game board with white empty cells
- Red cells in the top-left (Player 1's territory)
- Blue cells in the bottom-right (Player 2's territory)
- A preview of what gameplay will look like

## What You've Learnt

- **Player constants**: State values (0/1/2) and attribute colours
- **Coordinate conversion**: Board space (0-7) to screen space
- **Reusable subroutines**: `set_cell` handles address calculation
- **State vs display**: Game logic uses numbers, display uses colours
- **16-bit multiplication**: Using `ADD HL,HL` to multiply by powers of 2

## The Complete Code

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-04/inkwar.asm" />

## Phase 1 Progress

Units 1-4 covered the display fundamentals:
- Unit 1: First contact with attributes
- Unit 2: The 32×24 grid
- Unit 3: Drawing the board
- Unit 4: Player colours

**Next: Input.** A game isn't a game without player control. In Unit 5, we'll read the keyboard and start responding to the humans at the controls.
