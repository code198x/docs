---
title: "Turn System"
description: "Take turns. Red claims, then blue claims, then red again. Real two-player competition."
pubDate: 2026-01-09
game: 1
gameName: "Ink War"
unit: 8
totalUnits: 64
system: "Sinclair ZX Spectrum"
tags: ["assembly", "z80", "turns", "multiplayer", "state"]
prevLesson: "/sinclair-zx-spectrum/assembly/game-01-ink-war/unit-07"
nextLesson: "/sinclair-zx-spectrum/assembly/game-01-ink-war/unit-09"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";
import InlineNote from "../../../../components/units/InlineNote.astro";

## What You're Building

In Unit 7, every cell went to Player 1. That's not much of a game. Now we add turns — after each successful claim, it becomes the other player's turn.

By the end of this unit, you'll have:

- Alternating turns between players
- A turn indicator showing whose turn it is
- Cursor colour matching the current player
- The foundation for real two-player gameplay

![Unit 8 Screenshot](/images/sinclair-zx-spectrum/game-01-ink-war/unit-08/screenshot.png)

*The red bar shows it's Player 1's turn. The cursor flashes red.*

## Switching Players

The elegant way to toggle between 1 and 2: subtract from 3.

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-08/snippets/01-switch-player.asm" />

If current is 1, then 3 - 1 = 2. If current is 2, then 3 - 2 = 1. Perfect toggle.

<InlineNote>
You could also use XOR: `xor 3` toggles bit 0 and bit 1, changing 1↔2. But subtraction is clearer and works for any two consecutive values.
</InlineNote>

## The Turn Indicator

Players need to know whose turn it is without counting cells. We add a coloured bar above the board:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-08/snippets/02-turn-indicator.asm" />

Red bar = Player 1's turn. Blue bar = Player 2's turn. Simple, clear, unmistakable.

## Cursor Colour

The cursor now matches the current player. This reinforces whose turn it is:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-08/snippets/03-cursor-colour.asm" />

On empty cells, the cursor uses the current player's colour with FLASH added. On claimed cells, it adds FLASH to whatever colour is there.

## Claim and Switch

The claim routine now calls `switch_player` after a successful claim:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-08/snippets/04-claim-with-switch.asm" />

The sequence: validate → claim → display → feedback → switch. After the switch, everything updates: the turn indicator changes colour, and the cursor redraws in the new player's colour.

## Hot-Seat Multiplayer

Both players share the same keyboard. After Player 1 claims a cell, they pass control to Player 2 (metaphorically — the game handles it automatically). This is "hot-seat" multiplayer: one keyboard, take turns.

It's not glamorous, but it works. And it's how many classic games handled two-player mode.

## Build It. Run It.

```bash
pasmonext --sna inkwar.asm inkwar.sna
```

Play a mock game:

1. Red indicator, red cursor — Player 1's turn
2. Move cursor, press Space — cell turns red
3. Blue indicator, blue cursor — Player 2's turn!
4. Move cursor, press Space — cell turns blue
5. Red indicator again — turns alternate properly

Try claiming an occupied cell — the turn doesn't change on failed claims.

## What You've Learnt

- **Player toggle**: 3 - current swaps 1↔2
- **Turn indicator**: Coloured bar shows whose turn
- **Visual consistency**: Cursor colour matches current player
- **Turn transitions**: Update indicator and cursor on switch
- **Hot-seat multiplayer**: Shared keyboard, alternating turns

## The Complete Code

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-08/inkwar.asm" />

## Phase Progress

Units 5-8 covered input and interaction:
- Unit 5: Keyboard reading
- Unit 6: Moving cursor
- Unit 7: Claiming cells
- Unit 8: Turn system

**Next: Game Logic.** Players can claim cells and take turns, but the game doesn't know when it's over or who won. In Units 9-12, we add move validation, score display, game end detection, and winner determination.
