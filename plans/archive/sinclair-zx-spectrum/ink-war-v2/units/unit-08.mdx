---
title: "The 32×24 Grid"
description: "Map the complete attribute grid and understand how Ink War's 8×8 board fits within the Spectrum's 32×24 character display."
pubDate: 2026-01-09
game: 1
gameSlug: "ink-war"
unit: 8
unitSlug: "the-32x24-grid"
totalUnits: 64
tags: ["assembly", "z80", "attributes", "coordinates", "game-board"]
prevUnit: "/sinclair-zx-spectrum/assembly/game-01-ink-war/unit-07"
nextUnit: "/sinclair-zx-spectrum/assembly/game-01-ink-war/unit-09"
layout: "../../../../layouts/UnitLayout.astro"
---

import CodeFromFile from "@components/CodeFromFile.astro";

The Spectrum's display divides into 32 columns and 24 rows of attribute cells. Ink War's 8×8 game board sits within this grid. Understanding the full coordinate system lets you place the board anywhere on screen.

## The Complete Grid

This program fills every cell with a colour derived from its coordinates, then highlights where the Ink War board will sit:

<CodeFromFile src="sinclair-zx-spectrum/game-01-ink-war/unit-08/grid.asm" />

![The 32×24 grid with board position highlighted](/images/sinclair-zx-spectrum/game-01-ink-war/unit-08/grid.png)

## Grid Dimensions

| Dimension | Value | Calculation |
|-----------|-------|-------------|
| Columns | 32 | 256 pixels ÷ 8 pixels/cell |
| Rows | 24 | 192 pixels ÷ 8 pixels/cell |
| Total cells | 768 | 32 × 24 |
| Memory | 768 bytes | One byte per cell |

The attribute grid exactly covers the display. No pixel is outside an attribute cell.

## Coordinate Mapping

The nested loop fills every cell:

```asm
    ld hl, $5800        ; Start of attributes
    ld d, 0             ; Row counter (0-23)

row_loop:
    ld e, 0             ; Column counter (0-31)

col_loop:
    ; Calculate colour from coordinates
    ld a, d             ; Row → PAPER
    and %00000111
    rlca
    rlca
    rlca
    ld b, a

    ld a, e             ; Column → INK
    and %00000111
    or b
    ld (hl), a
    inc hl
    ; ...
```

Row determines PAPER (background), column determines INK (foreground). The pattern repeats every 8 cells because colours cycle 0-7.

## Positioning the Game Board

Ink War uses an 8×8 board. On a 32×24 grid, we can centre it:

```
Screen columns: 0  1  2  ... 11 12 13 14 15 16 17 18 19 20 ... 31
                            └────── BOARD ──────┘

Screen rows:    0  1  2  ... 7  8  9  10 11 12 13 14 15 16 ... 23
                            └────── BOARD ──────┘
```

**Board position:**
- Columns 12-19 (8 columns)
- Rows 8-15 (8 rows)
- Leaves 12 columns on left, 12 on right
- Leaves 8 rows above, 8 below

## Highlighting the Board Area

The border cells show where the board sits:

```asm
highlight_cell:
    push bc
    call get_attr_addr  ; HL = cell address
    ld a, (hl)
    or %01000000        ; Set BRIGHT bit
    ld (hl), a          ; Make brighter
    pop bc
    ret
```

ORing with BRIGHT enhances existing colours without changing them. The board boundary becomes visible against the colour gradient.

## Coordinate Constants

Define board position for easy adjustment:

```asm
; Board configuration
BOARD_TOP       equ 8       ; First row
BOARD_LEFT      equ 12      ; First column
BOARD_SIZE      equ 8       ; 8×8 cells

; Derived values
BOARD_BOTTOM    equ BOARD_TOP + BOARD_SIZE - 1    ; Row 15
BOARD_RIGHT     equ BOARD_LEFT + BOARD_SIZE - 1   ; Column 19

; Convert board coordinates (0-7) to screen coordinates
; board_row → screen_row = board_row + BOARD_TOP
; board_col → screen_col = board_col + BOARD_LEFT
```

## Screen vs Board Coordinates

Ink War uses two coordinate systems:

| System | Range | Purpose |
|--------|-------|---------|
| Screen | Row 0-23, Col 0-31 | Attribute memory |
| Board | Row 0-7, Col 0-7 | Game logic |

Converting between them:

```asm
; Board (B,C) to screen (B,C)
board_to_screen:
    ld a, b
    add a, BOARD_TOP
    ld b, a
    ld a, c
    add a, BOARD_LEFT
    ld c, a
    ret

; Screen (B,C) to board (B,C)
; Returns carry set if outside board
screen_to_board:
    ld a, b
    sub BOARD_TOP
    ret c               ; Above board
    cp BOARD_SIZE
    ccf
    ret c               ; Below board
    ld b, a

    ld a, c
    sub BOARD_LEFT
    ret c               ; Left of board
    cp BOARD_SIZE
    ccf
    ret c               ; Right of board
    ld c, a
    ret                 ; Carry clear = valid
```

## Why Centre the Board?

- **Visual balance** — Board doesn't feel cramped
- **Space for UI** — Score display, player indicators, messages
- **Flexibility** — Board position can change without rewriting game logic

## Sequential vs Calculated Access

Two ways to traverse the grid:

**Sequential (faster for full grid):**
```asm
    ld hl, $5800
    ld bc, 768
loop:
    ld (hl), a
    inc hl
    dec bc
    ; ...
```

**Calculated (for specific cells):**
```asm
    ; Cell at row B, column C
    call get_attr_addr
    ld (hl), a
```

Ink War uses calculated access—players claim individual cells, not entire rows.

## What You've Learnt

- **Grid dimensions** — 32 columns × 24 rows = 768 cells
- **Board positioning** — 8×8 board centred at rows 8-15, columns 12-19
- **Coordinate systems** — Screen coordinates vs board coordinates
- **Coordinate conversion** — Add offsets to convert board → screen
- **BRIGHT highlighting** — OR with $40 to enhance without changing colour
- **Sequential vs calculated** — Choose based on access pattern
