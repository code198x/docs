# Game 13: Knuckle Brawl - Complete 256-Unit Outline

## Game Overview
**Platform:** Sinclair ZX Spectrum
**Genre:** Side-scrolling beat 'em up
**Concept:** Streets of Rage/Final Fight-style brawler with Y-depth sorting, combo systems, weapon pickups, and two-player co-op. Walk right, punch enemies, fight bosses.

**Technical Focus:**
- Y-axis depth sorting (painter's algorithm)
- Large animated character sprites
- Melee combat with hit detection
- Combo and juggle systems
- Multiple enemy coordination
- Two-player cooperative mode

---

## Phase 1: Foundation (Units 1-16)
Unit 1: Project setup
Unit 2: Memory layout for brawler
Unit 3: Display configuration
Unit 4: Street background tiles
Unit 5: Scrolling street
Unit 6: Player sprite (large)
Unit 7: Idle animation
Unit 8: 4-way movement
Unit 9: Walk animation
Unit 10: Movement speed
Unit 11: Y-depth positioning
Unit 12: Screen bounds
Unit 13: Facing direction
Unit 14: Turn animation
Unit 15: Movement feel
Unit 16: Phase 1 integration
**Runnable each unit**

---

## Phase 2: Depth Sorting (Units 17-32)
Unit 17: Y-sorting concept
Unit 18: Sort algorithm
Unit 19: Bucket sort implementation
Unit 20: Draw order
Unit 21: Multiple sprites sorted
Unit 22: Performance optimisation
Unit 23: Depth zones
Unit 24: Shadow sprites
Unit 25: Shadow positioning
Unit 26: Depth overlap handling
Unit 27: Sprite priority
Unit 28: Z-height for jumps
Unit 29: Landing detection
Unit 30: Depth debugging
Unit 31: Sorting polish
Unit 32: Phase 2 integration
**Runnable each unit**

---

## Phase 3: Basic Combat (Units 33-48)
Unit 33: Attack concept
Unit 34: Punch animation
Unit 35: Punch hitbox
Unit 36: Hit detection
Unit 37: Kick animation
Unit 38: Kick hitbox
Unit 39: Attack priority
Unit 40: Recovery frames
Unit 41: Attack chains
Unit 42: Jab-jab-punch
Unit 43: Knockback
Unit 44: Hit stun
Unit 45: Block stance
Unit 46: Block detection
Unit 47: Guard break
Unit 48: Phase 3 integration
**Runnable each unit**

---

## Phase 4: Advanced Combat (Units 49-64)
Unit 49: Grab mechanic
Unit 50: Grab range
Unit 51: Grab animation
Unit 52: Throw animation
Unit 53: Throw direction
Unit 54: Throw damage
Unit 55: Back attack
Unit 56: Jump attack
Unit 57: Jump kick
Unit 58: Flying kick
Unit 59: Ground attack
Unit 60: Downed enemies
Unit 61: Special move meter
Unit 62: Special attack
Unit 63: Combat feel
Unit 64: Phase 4 integration
**Runnable each unit**

---

## Phase 5: Combo System (Units 65-80)
Unit 65: Combo concept
Unit 66: Combo counter
Unit 67: Combo display
Unit 68: Combo timing window
Unit 69: Combo chains
Unit 70: 3-hit combo
Unit 71: 5-hit combo
Unit 72: Launcher attack
Unit 73: Juggle state
Unit 74: Air combos
Unit 75: Juggle limit
Unit 76: Combo finishers
Unit 77: Combo damage scaling
Unit 78: Combo scoring
Unit 79: Combo mastery bonus
Unit 80: Phase 5 integration
**Runnable each unit**

---

## Phase 6: Enemies (Units 81-96)
Unit 81: Enemy framework
Unit 82: Punk enemy
Unit 83: Punk AI
Unit 84: Punk attacks
Unit 85: Thug enemy
Unit 86: Thug AI (aggressive)
Unit 87: Knife enemy
Unit 88: Knife attacks
Unit 89: Fat enemy
Unit 90: Fat AI (slow/tough)
Unit 91: Acrobat enemy
Unit 92: Acrobat jumps
Unit 93: Female enemy
Unit 94: Attack coordination
Unit 95: Enemy variety
Unit 96: Phase 6 integration
**Runnable each unit**

---

## Phase 7: Enemy AI (Units 97-112)
Unit 97: AI framework
Unit 98: Approach behaviour
Unit 99: Attack range detection
Unit 100: Attack decision
Unit 101: Surround tactics
Unit 102: Attack slots
Unit 103: Waiting behaviour
Unit 104: Reaction to player
Unit 105: Group coordination
Unit 106: Difficulty scaling
Unit 107: Aggressive AI
Unit 108: Defensive AI
Unit 109: AI variety
Unit 110: Boss AI prep
Unit 111: AI polish
Unit 112: Phase 7 integration
**Runnable each unit**

---

## Phase 8: Weapons (Units 113-128)
Unit 113: Weapon framework
Unit 114: Weapon pickup
Unit 115: Pipe weapon
Unit 116: Pipe swing
Unit 117: Knife weapon
Unit 118: Knife attack
Unit 119: Chain weapon
Unit 120: Chain range
Unit 121: Bottle (thrown)
Unit 122: Throwing mechanics
Unit 123: Weapon durability
Unit 124: Weapon drop
Unit 125: Enemy weapons
Unit 126: Disarm mechanic
Unit 127: Weapon balance
Unit 128: Phase 8 integration
**Runnable each unit**

---

## Phase 9: Stage 1-2 (Units 129-144)
Unit 129: Stage 1 - City streets
Unit 130: Stage 1 background
Unit 131: Stage 1 enemy waves
Unit 132: Stage 1 sections
Unit 133: Stage 1 mini-boss
Unit 134: Stage 1 boss
Unit 135: Boss 1 patterns
Unit 136: Stage 1 complete
Unit 137: Stage 2 - Warehouse
Unit 138: Stage 2 background
Unit 139: Stage 2 hazards
Unit 140: Stage 2 enemy waves
Unit 141: Stage 2 mini-boss
Unit 142: Stage 2 boss
Unit 143: Boss 2 patterns
Unit 144: Phase 9 integration
**Runnable each unit**

---

## Phase 10: Stage 3-4 (Units 145-160)
Unit 145: Stage 3 - Docks
Unit 146: Stage 3 background
Unit 147: Stage 3 hazards
Unit 148: Stage 3 enemy waves
Unit 149: Stage 3 boss
Unit 150: Boss 3 patterns
Unit 151: Stage 3 complete
Unit 152: Stage 4 - Underground
Unit 153: Stage 4 background
Unit 154: Stage 4 hazards
Unit 155: Stage 4 enemy waves
Unit 156: Stage 4 boss
Unit 157: Boss 4 patterns
Unit 158: Stage 4 complete
Unit 159: Stage variety
Unit 160: Phase 10 integration
**Runnable each unit**

---

## Phase 11: Final Stage (Units 161-176)
Unit 161: Stage 5 - Crime HQ
Unit 162: Stage 5 background
Unit 163: Stage 5 gauntlet
Unit 164: Stage 5 enemy waves
Unit 165: Stage 5 elite enemies
Unit 166: Final boss arena
Unit 167: Final boss design
Unit 168: Final boss phase 1
Unit 169: Final boss phase 2
Unit 170: Final boss defeat
Unit 171: Ending sequence
Unit 172: Good ending
Unit 173: Best ending
Unit 174: Credits roll
Unit 175: Ending variations
Unit 176: Phase 11 integration
**Runnable each unit**

---

## Phase 12: Two-Player (Units 177-192)
Unit 177: Two-player concept
Unit 178: Player 2 character
Unit 179: Controller 2 input
Unit 180: Both players active
Unit 181: Shared depth sorting
Unit 182: Cooperative attacks
Unit 183: Team combos
Unit 184: Friendly fire toggle
Unit 185: Shared lives
Unit 186: Individual lives
Unit 187: Revive mechanic
Unit 188: Two-player balance
Unit 189: Versus mode
Unit 190: Arena combat
Unit 191: Two-player polish
Unit 192: Phase 12 integration
**Runnable each unit**

---

## Phase 13: Game Systems (Units 193-208)
Unit 193: Health system
Unit 194: Health bar display
Unit 195: Health pickups
Unit 196: Food items
Unit 197: Lives system
Unit 198: Continue system
Unit 199: Score system
Unit 200: High scores
Unit 201: Difficulty modes
Unit 202: Easy mode
Unit 203: Normal mode
Unit 204: Hard mode
Unit 205: Character selection
Unit 206: Character stats
Unit 207: Unlockable character
Unit 208: Phase 13 integration
**Runnable each unit**

---

## Phase 14: Audio (Units 209-224)
Unit 209: AY setup
Unit 210: Punch sounds
Unit 211: Kick sounds
Unit 212: Hit impact sounds
Unit 213: Grunt sounds
Unit 214: Weapon sounds
Unit 215: Enemy death sounds
Unit 216: Music driver
Unit 217: Title music
Unit 218: Stage 1-2 music
Unit 219: Stage 3-4 music
Unit 220: Stage 5 music
Unit 221: Boss music
Unit 222: Victory music
Unit 223: Audio mixing
Unit 224: Phase 14 integration
**Runnable each unit**

---

## Phase 15: Polish (Units 225-240)
Unit 225: Visual effects
Unit 226: Hit sparks
Unit 227: Impact effects
Unit 228: Screen shake
Unit 229: Death animations
Unit 230: Gameplay feel
Unit 231: Combat balance
Unit 232: Enemy balance
Unit 233: Boss balance
Unit 234: Difficulty curve
Unit 235: Playtest 1
Unit 236: Feedback integration
Unit 237: Playtest 2
Unit 238: Bug fixes
Unit 239: Performance verify
Unit 240: Phase 15 integration
**Runnable each unit**

---

## Phase 16: Release (Units 241-256)
Unit 241: Title screen
Unit 242: Title animation
Unit 243: Main menu
Unit 244: Character select
Unit 245: Options screen
Unit 246: High score display
Unit 247: Attract mode
Unit 248: Demo play
Unit 249: TAP creation
Unit 250: TZX creation
Unit 251: 48K/128K versions
Unit 252: Documentation
Unit 253: Final testing
Unit 254: Release candidate
Unit 255: Beat 'em up mastery
Unit 256: Complete Knuckle Brawl
**Runnable each unit**

---

## Technical Summary

### Key ZX Spectrum Features
- Y-axis depth sorting
- Large character sprites
- Melee combat system
- Combo mechanics
- Two-player cooperative

### Code Pattern
```z80
; Y-depth bucket sort
sort_by_y:
    ld hl,sort_buckets
    ld bc,BUCKET_COUNT*2
    call clear_memory
    ; Place each sprite in bucket
    ld ix,sprite_list
    ld b,SPRITE_COUNT
.bucket_loop:
    ld a,(ix+SPRITE_Y)
    srl a
    srl a               ; Y / 4 = bucket index
    ld e,a
    ld d,0
    ld hl,sort_buckets
    add hl,de
    ; Add sprite to bucket linked list
    ; ...
    djnz .bucket_loop
    ret
```

---

## Version History
- v1.0 - Initial 256-unit outline
